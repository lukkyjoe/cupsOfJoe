const L = require('leaflet');
const places = require('places.js');

console.log('script')

var placesAutocomplete = places({
  appId: 'plW301B2AVW4',
  apiKey: '1a69381fe35eb5bfac9435c42eb1fad9',
  container: document.querySelector('#input-map')
});

var map = L.map('map-example-container', {
  scrollWheelZoom: false,
  zoomControl: true
});

var osmLayer = new L.TileLayer(
  'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    minZoom: 1,
    maxZoom: 13,
    attribution: 'Map data Â© <a href="https://openstreetmap.org">OpenStreetMap</a> contributors'
  }
);

var markers = [];

map.setView(new L.LatLng(0, 0), 1);
map.addLayer(osmLayer);

var geojsonFeature = {
  "type": "Feature",
  "properties": {
      "name": "Coors Field",
      "amenity": "Baseball Stadium",
      "popupContent": "This is where the Rockies play!"
  },
  "geometry": {
      "type": "Point",
      "coordinates": [-104.99404, 39.75621]
  }
};

// recycle cups
let sanFrancisco = {"type":"GeometryCollection","geometries":[{"type":"MultiPolygon","coordinates":[[[[-122.617000000000004,37.811],[-122.618000000000009,37.814999999999998],[-122.616,37.817999999999998],[-122.533000000000001,37.819000000000003],[-122.533000000000001,37.822000000000003],[-122.530000000000001,37.825000000000003],[-122.528000000000006,37.825000000000003],[-122.525000000000006,37.829000000000001],[-122.510000000000005,37.829000000000001],[-122.504000000000005,37.826000000000001],[-122.497,37.826000000000001],[-122.492000000000004,37.831000000000003],[-122.483000000000004,37.831000000000003],[-122.481999999999999,37.835000000000001],[-122.478000000000009,37.838000000000001],[-122.472000000000008,37.837000000000003],[-122.423000000000002,37.855000000000004],[-122.436000000000007,37.929000000000002],[-122.436000000000007,37.932000000000002],[-122.430999999999997,37.933999999999997],[-122.370000000000005,37.886000000000003],[-122.343000000000004,37.813000000000002],[-122.278000000000006,37.710000000000001],[-122.278000000000006,37.706000000000003],[-122.281000000000006,37.704000000000001],[-122.576999999999998,37.703000000000003],[-122.579000000000008,37.704999999999998],[-122.585000000000008,37.759999999999998],[-122.591999999999999,37.786999999999999],[-122.603000000000009,37.800000000000004],[-122.617000000000004,37.811]]],[[[-123.094999999999999,37.710000000000001],[-123.117000000000004,37.710000000000001],[-123.135000000000005,37.716000000000001],[-123.165999999999997,37.741],[-123.174000000000007,37.753999999999998],[-123.177000000000007,37.762],[-123.177999999999997,37.777000000000001],[-123.173000000000002,37.794000000000004],[-123.168999999999997,37.800000000000004],[-123.156000000000006,37.811],[-123.141999999999996,37.82],[-123.12700000000001,37.826000000000001],[-123.094000000000008,37.826000000000001],[-123.069000000000003,37.817999999999998],[-123.058000000000007,37.811999999999998],[-123.040000000000006,37.798000000000002],[-123.034999999999997,37.791000000000004],[-123.031000000000006,37.780999999999999],[-123.010000000000005,37.779000000000003],[-122.992000000000004,37.773000000000003],[-122.978999999999999,37.762],[-122.972000000000008,37.755000000000003],[-122.971000000000004,37.752000000000002],[-122.962000000000003,37.747999999999998],[-122.947000000000003,37.734999999999999],[-122.936000000000007,37.716999999999999],[-122.932000000000002,37.703000000000003],[-122.932000000000002,37.697000000000003],[-122.938000000000002,37.675000000000004],[-122.945999999999998,37.660000000000004],[-122.960999999999999,37.648000000000003],[-122.971000000000004,37.643000000000001],[-122.989000000000004,37.637],[-123.00200000000001,37.636000000000003],[-123.028999999999996,37.640999999999998],[-123.043000000000006,37.646999999999998],[-123.055999999999997,37.655000000000001],[-123.072000000000003,37.670000000000002],[-123.079000000000008,37.688000000000002],[-123.090000000000003,37.698999999999998],[-123.094999999999999,37.710000000000001]]]]}]}


let berkeley = {"type":"MultiPolygon","coordinates":[[[[-122.369,37.869999999999997],[-122.308999999999997,37.881999999999998],[-122.299999999999997,37.883000000000003],[-122.283000000000001,37.881999999999998],[-122.281999999999996,37.889000000000003],[-122.283000000000001,37.890999999999998],[-122.287000000000006,37.890999999999998],[-122.287000000000006,37.899000000000001],[-122.278000000000006,37.901000000000003],[-122.277000000000001,37.902000000000001],[-122.278000000000006,37.902999999999999],[-122.269999999999996,37.907000000000004],[-122.269999999999996,37.904000000000003],[-122.263999999999996,37.904000000000003],[-122.263000000000005,37.902000000000001],[-122.260999999999996,37.902000000000001],[-122.260999999999996,37.899999999999999],[-122.256,37.899000000000001],[-122.256,37.896000000000001],[-122.253,37.896000000000001],[-122.253,37.893999999999998],[-122.25,37.893000000000001],[-122.25,37.889000000000003],[-122.246000000000009,37.881999999999998],[-122.245000000000005,37.869999999999997],[-122.246000000000009,37.864000000000004],[-122.244,37.863],[-122.244,37.859000000000002],[-122.242000000000004,37.856999999999999],[-122.234999999999999,37.858000000000004],[-122.234000000000009,37.852000000000004],[-122.253,37.850999999999999],[-122.253,37.853999999999999],[-122.263999999999996,37.853000000000002],[-122.269000000000005,37.852000000000004],[-122.268000000000001,37.849000000000004],[-122.269999999999996,37.849000000000004],[-122.269000000000005,37.847000000000001],[-122.271000000000001,37.846000000000004],[-122.275999999999996,37.846000000000004],[-122.275999999999996,37.847999999999999],[-122.281999999999996,37.847000000000001],[-122.284000000000006,37.850999999999999],[-122.356000000000009,37.835999999999999],[-122.369,37.869999999999997]]]]}

// landfill
let oakland = {"type":"MultiPolygon","coordinates":[[[[-122.147088461538473,37.792352991452994],[-122.146270000000001,37.792340000000003],[-122.146037854545455,37.792119523232323],[-122.141000000000005,37.791000000000004],[-122.141000000000005,37.789000000000001],[-122.143000000000001,37.788000000000004],[-122.141999999999996,37.786000000000001],[-122.132999999999996,37.777999999999999],[-122.125,37.768000000000001],[-122.116,37.750999999999998],[-122.114000000000004,37.75],[-122.113,37.741999999999997],[-122.115000000000009,37.739000000000004],[-122.114000000000004,37.736000000000004],[-122.121000000000009,37.728999999999999],[-122.12700000000001,37.728000000000002],[-122.132000000000005,37.728999999999999],[-122.132999999999996,37.733000000000004],[-122.135000000000005,37.733000000000004],[-122.137,37.730000000000004],[-122.140000000000001,37.730000000000004],[-122.141999999999996,37.738],[-122.147000000000006,37.741],[-122.164000000000001,37.734999999999999],[-122.165999999999997,37.737000000000002],[-122.170000000000002,37.734999999999999],[-122.168999999999997,37.731000000000002],[-122.171999999999997,37.731000000000002],[-122.168999999999997,37.727000000000004],[-122.174000000000007,37.725999999999999],[-122.174999999999997,37.724000000000004],[-122.183000000000007,37.724000000000004],[-122.189000000000007,37.728000000000002],[-122.191000000000003,37.725999999999999],[-122.192999999999998,37.727000000000004],[-122.195000000000007,37.725999999999999],[-122.195999999999998,37.724000000000004],[-122.188000000000002,37.719000000000001],[-122.188000000000002,37.716999999999999],[-122.197000000000003,37.715000000000003],[-122.207999999999998,37.710000000000001],[-122.198999999999998,37.692999999999998],[-122.192000000000007,37.683999999999997],[-122.180000000000007,37.672000000000004],[-122.176000000000002,37.672000000000004],[-122.176000000000002,37.670000000000002],[-122.218000000000004,37.631],[-122.219999999999999,37.631],[-122.283000000000001,37.707999999999998],[-122.281619198829759,37.708051140784079],[-122.281780100000006,37.708229899999999],[-122.278708883564562,37.708158930238348],[-122.256,37.709000000000003],[-122.253,37.710999999999999],[-122.262,37.716000000000001],[-122.262,37.718000000000004],[-122.249000000000009,37.728999999999999],[-122.236000000000004,37.719999999999999],[-122.228999999999999,37.728000000000002],[-122.227000000000004,37.728000000000002],[-122.228000000000009,37.731000000000002],[-122.225999999999999,37.744],[-122.228000000000009,37.744999999999997],[-122.228000000000009,37.747999999999998],[-122.225000000000009,37.753999999999998],[-122.225999999999999,37.764000000000003],[-122.231999999999999,37.768999999999998],[-122.236000000000004,37.770000000000003],[-122.245000000000005,37.776000000000003],[-122.247,37.783000000000001],[-122.254000000000005,37.786000000000001],[-122.257999999999996,37.783000000000001],[-122.278000000000006,37.792000000000002],[-122.313000000000002,37.792999999999999],[-122.341000000000008,37.800000000000004],[-122.347999999999999,37.810000000000002],[-122.356999999999999,37.835000000000001],[-122.356000000000009,37.837000000000003],[-122.329999999999998,37.841999999999999],[-122.280000000000001,37.828000000000003],[-122.278000000000006,37.835999999999999],[-122.286000000000001,37.835999999999999],[-122.290000000000006,37.850999999999999],[-122.283000000000001,37.852000000000004],[-122.281000000000006,37.847999999999999],[-122.275999999999996,37.849000000000004],[-122.275000000000006,37.847000000000001],[-122.271000000000001,37.847000000000001],[-122.269999999999996,37.853000000000002],[-122.254999999999995,37.855000000000004],[-122.253,37.855000000000004],[-122.25200000000001,37.852000000000004],[-122.234999999999999,37.853000000000002],[-122.236000000000004,37.856999999999999],[-122.242000000000004,37.856000000000002],[-122.246000000000009,37.859000000000002],[-122.245000000000005,37.862000000000002],[-122.247,37.866],[-122.246000000000009,37.869999999999997],[-122.248000000000005,37.886000000000003],[-122.242000000000004,37.883000000000003],[-122.236000000000004,37.884],[-122.225999999999999,37.881],[-122.216000000000008,37.872],[-122.215000000000003,37.868000000000002],[-122.216999999999999,37.868000000000002],[-122.219999999999999,37.865000000000002],[-122.210999999999999,37.858000000000004],[-122.207999999999998,37.853000000000002],[-122.203000000000003,37.852000000000004],[-122.198999999999998,37.847000000000001],[-122.195999999999998,37.846000000000004],[-122.192999999999998,37.841000000000001],[-122.183999999999997,37.838000000000001],[-122.183000000000007,37.832999999999998],[-122.186000000000007,37.829999999999998],[-122.185000000000002,37.826000000000001],[-122.186000000000007,37.823],[-122.176000000000002,37.817],[-122.173000000000002,37.811],[-122.174999999999997,37.805999999999997],[-122.177000000000007,37.805],[-122.170000000000002,37.801000000000002],[-122.171999999999997,37.805],[-122.165999999999997,37.807000000000002],[-122.156000000000006,37.797000000000004],[-122.150999999999996,37.797000000000004],[-122.150000000000006,37.792999999999999],[-122.147088461538473,37.792352991452994]]]]}

// compost coffee cups
let sanMateo = {"type":"GeometryCollection","geometries":[{"type":"MultiPolygon","coordinates":[[[[-122.288273000000004,37.602134900000003],[-122.294479100000004,37.602134],[-122.297355100000004,37.602097000000001],[-122.3245991,37.601748999999998],[-122.333680999999999,37.601633900000003],[-122.333554000000007,37.598883899999997],[-122.333274000000003,37.5928209],[-122.333267000000006,37.592721900000001],[-122.333164999999994,37.5906339],[-122.333032000000003,37.587884899999999],[-122.333240000000004,37.587610900000001],[-122.333258000000001,37.587603899999998],[-122.333922999999999,37.5873499],[-122.334281000000004,37.587224900000002],[-122.334625000000003,37.587106900000002],[-122.334665000000001,37.586766799999999],[-122.334649999999996,37.586480899999998],[-122.333696000000003,37.585607899999999],[-122.332284000000001,37.5843129],[-122.330798599999994,37.582966499999998],[-122.331593999999996,37.582448900000003],[-122.332346999999999,37.581927899999997],[-122.333074999999994,37.5814229],[-122.333803000000003,37.580917900000003],[-122.334553,37.580397900000001],[-122.335523100000003,37.579709700000002],[-122.336499000000003,37.579048899999997],[-122.337435999999997,37.578399900000001],[-122.338373000000004,37.577749900000001],[-122.339375000000004,37.5770549],[-122.33999,37.576628900000003],[-122.340937999999994,37.575970900000002],[-122.341886000000002,37.575313899999998],[-122.342737999999997,37.574701900000001],[-122.342893000000004,37.5745079],[-122.342374000000007,37.574365899999997],[-122.342178000000004,37.574287900000002],[-122.3420378,37.5742306],[-122.343171999999996,37.573709899999997],[-122.345067599999993,37.572924499999999],[-122.346320800000001,37.572373399999996],[-122.347063000000006,37.572035900000003],[-122.348052999999993,37.571609899999999],[-122.348264,37.571517900000003],[-122.349553999999998,37.570963900000002],[-122.349875999999995,37.570824899999998],[-122.350444999999993,37.570580900000003],[-122.351791399999996,37.570195599999998],[-122.352220500000001,37.569991600000002],[-122.351081500000006,37.5684562],[-122.351052800000005,37.568235899999998],[-122.350665800000002,37.567624899999998],[-122.350030799999999,37.566620899999997],[-122.3513248,37.566052900000003],[-122.352170799999996,37.565681900000001],[-122.352704799999998,37.565505899999998],[-122.354306800000003,37.564976899999998],[-122.354841800000003,37.564801899999999],[-122.3548598,37.564761900000001],[-122.354895799999994,37.564697899999999],[-122.354925800000004,37.564648900000002],[-122.354946799999993,37.564596899999998],[-122.354946799999993,37.564593899999998],[-122.354958800000006,37.564537899999998],[-122.354953800000004,37.564472899999998],[-122.354929799999994,37.5644049],[-122.354636799999994,37.563991899999998],[-122.354543800000002,37.563860900000002],[-122.354478799999995,37.563828899999997],[-122.354382799999996,37.563693899999997],[-122.354094799999999,37.563291900000003],[-122.354140799999996,37.563011199999998],[-122.353999799999997,37.5631579],[-122.353703800000005,37.562742900000003],[-122.353298800000005,37.562176899999997],[-122.352994800000005,37.561403900000002],[-122.352969799999997,37.561337899999998],[-122.352942799999994,37.561284899999997],[-122.352892800000006,37.561222899999997],[-122.352846799999995,37.561186900000003],[-122.352783799999997,37.561149899999997],[-122.352738799999997,37.561131899999999],[-122.352705799999995,37.561121900000003],[-122.352670799999999,37.561113900000002],[-122.352622800000006,37.561106899999999],[-122.352443800000003,37.561219899999998],[-122.351847500000005,37.561502900000001],[-122.349933500000006,37.562367000000002],[-122.346665799999997,37.563920899999999],[-122.345553800000005,37.564388899999997],[-122.345265800000007,37.564403900000002],[-122.343745799999994,37.5650719],[-122.3413161,37.566245000000002],[-122.338449400000002,37.567557999999998],[-122.337316400000006,37.568034300000001],[-122.336885800000005,37.5673739],[-122.336247799999995,37.567730900000001],[-122.335293899999996,37.5671149],[-122.334962899999994,37.566971899999999],[-122.3339699,37.566542900000002],[-122.333638899999997,37.5663999],[-122.333588899999995,37.566319900000003],[-122.3335249,37.566246900000003],[-122.333447899999996,37.566182900000001],[-122.333398799999998,37.566149899999999],[-122.333333800000005,37.566106900000001],[-122.333207799999997,37.566042899999999],[-122.333073799999994,37.5659919],[-122.332717799999998,37.565892900000001],[-122.332616799999997,37.565872900000002],[-122.332500800000005,37.565863899999997],[-122.332462800000002,37.565775899999998],[-122.332326800000004,37.565454899999999],[-122.332137799999998,37.565253900000002],[-122.331570799999994,37.564650899999997],[-122.3313828,37.564450899999997],[-122.331210799999994,37.564140899999998],[-122.330694800000003,37.563210900000001],[-122.330523799999995,37.5629019],[-122.330355800000007,37.5626909],[-122.3298518,37.562058899999997],[-122.329692800000004,37.561825900000002],[-122.329760199999996,37.561701200000002],[-122.329849800000005,37.561554899999997],[-122.329948799999997,37.561440900000001],[-122.330041800000004,37.561352900000003],[-122.330608799999993,37.560840900000002],[-122.331594800000005,37.559950899999997],[-122.332313900000003,37.559301900000001],[-122.332974899999996,37.558703899999998],[-122.3336489,37.558095899999998],[-122.334320899999994,37.557487899999998],[-122.334441900000002,37.557377899999999],[-122.334804899999995,37.557048899999998],[-122.334926899999999,37.556939900000003],[-122.335911899999999,37.556050900000002],[-122.335979899999998,37.555988900000003],[-122.336245899999994,37.555753899999999],[-122.336383900000001,37.5556299],[-122.336797899999993,37.555256900000003],[-122.336936899999998,37.555133900000001],[-122.337483899999995,37.554643900000002],[-122.337611899999999,37.554529899999999],[-122.3388949,37.553345899999997],[-122.338990899999999,37.553299899999999],[-122.339121899999995,37.553178899999999],[-122.339390899999998,37.552932900000002],[-122.339526899999996,37.552850900000003],[-122.339638899999997,37.552791900000003],[-122.339684899999995,37.552760900000003],[-122.339704900000001,37.552739899999999],[-122.3397389,37.552704900000002],[-122.339763899999994,37.552661899999997],[-122.339856900000001,37.552454900000001],[-122.340065899999999,37.551993899999999],[-122.340143900000001,37.551865900000003],[-122.340193900000003,37.551806900000003],[-122.340249900000003,37.551750900000002],[-122.340310900000006,37.551698899999998],[-122.340376899999995,37.551651900000003],[-122.340377899999993,37.551649900000001],[-122.340447900000001,37.551608899999998],[-122.340662899999998,37.5514929],[-122.340736899999996,37.551422899999999],[-122.340753899999996,37.551407900000001],[-122.340852900000002,37.551283900000001],[-122.340894899999995,37.551165900000001],[-122.340908900000002,37.551127899999997],[-122.340947900000003,37.551080900000002],[-122.340888899999996,37.551004900000002],[-122.340711900000002,37.550779900000002],[-122.340653900000007,37.550704899999999],[-122.340743900000007,37.549729900000003],[-122.340777900000006,37.549361900000001],[-122.339003899999994,37.5475049],[-122.338327899999996,37.546797900000001],[-122.338008900000005,37.546679900000001],[-122.337769899999998,37.5465929],[-122.337660900000003,37.546551899999997],[-122.337477899999996,37.546439900000003],[-122.337118899999993,37.546681900000003],[-122.336893700000005,37.546907599999997],[-122.336551099999994,37.5471979],[-122.336315900000002,37.547396900000003],[-122.336185900000004,37.547528900000003],[-122.3359679,37.547745900000002],[-122.335159300000001,37.548371799999998],[-122.334952200000004,37.548554000000003],[-122.334325399999997,37.549080699999998],[-122.333021000000002,37.5501808],[-122.331827200000006,37.5511591],[-122.331720200000007,37.551072599999998],[-122.331944899999996,37.5508819],[-122.332038900000001,37.550722899999997],[-122.329704899999996,37.549071900000001],[-122.329083900000001,37.548631899999997],[-122.328756900000002,37.5488979],[-122.328790100000006,37.548730999999997],[-122.3286911,37.548817],[-122.328648099999995,37.548727999999997],[-122.328615099999993,37.548659000000001],[-122.3286461,37.548634],[-122.328740100000005,37.548560000000002],[-122.328680899999995,37.548752899999997],[-122.328818900000002,37.5486389],[-122.329234900000003,37.548300900000001],[-122.329373899999993,37.548187900000002],[-122.329599900000005,37.548006899999997],[-122.329675899999998,37.547947899999997],[-122.330018899999999,37.5476709],[-122.330274900000006,37.547460899999997],[-122.330499900000007,37.547278900000002],[-122.330623900000006,37.547176899999997],[-122.330784899999998,37.547046899999998],[-122.330921900000007,37.546934899999997],[-122.3309979,37.546872899999997],[-122.331122899999997,37.546772900000001],[-122.331254099999995,37.546491000000003],[-122.3313761,37.546298],[-122.331417099999996,37.546233999999998],[-122.331455099999999,37.546233000000001],[-122.331572100000002,37.546230999999999],[-122.331519900000004,37.546447899999997],[-122.331927899999997,37.5461089],[-122.332159899999994,37.545915899999997],[-122.332244900000006,37.545844899999999],[-122.332467899999997,37.545659899999997],[-122.333207900000005,37.545045899999998],[-122.3330409,37.544848899999998],[-122.332694900000007,37.5444429],[-122.3325502,37.544234699999997],[-122.3322802,37.543845599999997],[-122.331744299999997,37.543145699999997],[-122.331609900000004,37.5429958],[-122.331435799999994,37.542755300000003],[-122.331022099999998,37.542280599999998],[-122.330176399999999,37.541268700000003],[-122.333025800000001,37.5389762],[-122.333613999999997,37.539394999999999],[-122.334648599999994,37.538543400000002],[-122.334856400000007,37.538372299999999],[-122.335346999999999,37.537968499999998],[-122.338515599999994,37.540407899999998],[-122.341420999999997,37.5383055],[-122.339998300000005,37.537095800000003],[-122.337506000000005,37.534976700000001],[-122.3382845,37.534346499999998],[-122.340267699999998,37.532829300000003],[-122.341538200000002,37.5318076],[-122.341094100000007,37.531475],[-122.339120100000002,37.530619999999999],[-122.338463099999998,37.530335000000001],[-122.337374100000005,37.529828999999999],[-122.337245100000004,37.529769000000002],[-122.336448099999998,37.529463],[-122.336004099999997,37.529283],[-122.335681100000002,37.529023000000002],[-122.334876100000002,37.528275999999998],[-122.334479099999996,37.527585999999999],[-122.334263100000001,37.526857],[-122.333994099999998,37.525601999999999],[-122.333218099999996,37.525599],[-122.332916100000006,37.525433],[-122.3330421,37.524498000000001],[-122.333810099999994,37.524287000000001],[-122.334192099999996,37.524441000000003],[-122.334497099999993,37.524563999999998],[-122.334639100000004,37.524304000000001],[-122.334903100000005,37.524082999999997],[-122.335441099999997,37.523636000000003],[-122.335698100000002,37.523421999999997],[-122.335963100000001,37.523201999999998],[-122.336223099999998,37.522917999999997],[-122.336975100000004,37.522103000000001],[-122.337021100000001,37.522100000000002],[-122.337406099999995,37.522075999999998],[-122.337407099999993,37.522056999999997],[-122.337413100000006,37.522008],[-122.337414100000004,37.522001000000003],[-122.337420100000003,37.521982999999999],[-122.337447100000006,37.521988999999998],[-122.337497099999993,37.521991],[-122.337522100000001,37.521993000000002],[-122.337606100000002,37.521979000000002],[-122.337656100000004,37.521974999999998],[-122.337718100000004,37.521982000000001],[-122.337730100000002,37.521985999999998],[-122.3378041,37.522013999999999],[-122.337958099999994,37.521648999999996],[-122.338157100000004,37.521178999999997],[-122.338792100000006,37.521146999999999],[-122.338803100000007,37.521107000000001],[-122.338918100000001,37.520729000000003],[-122.339026099999998,37.520806],[-122.339352099999999,37.521037],[-122.339364099999997,37.521045999999998],[-122.339457100000004,37.521121000000001],[-122.339809099999997,37.521068],[-122.340533100000002,37.520960000000002],[-122.340422099999998,37.520806],[-122.339144099999999,37.519030999999998],[-122.3383441,37.518134000000003],[-122.337963099999996,37.518362000000003],[-122.337292099999999,37.518766999999997],[-122.336869100000001,37.519021000000002],[-122.336685099999997,37.519154999999998],[-122.336668099999997,37.519190999999999],[-122.336496100000005,37.519576999999998],[-122.3361211,37.519646000000002],[-122.335858099999996,37.519694999999999],[-122.335901100000001,37.519897999999998],[-122.335905100000005,37.519914999999997],[-122.335902099999998,37.520021],[-122.335880099999997,37.520107000000003],[-122.335847099999995,37.520181000000001],[-122.335802099999995,37.520249999999997],[-122.335745099999997,37.520313000000002],[-122.335669100000004,37.520375999999999],[-122.335613100000003,37.520411000000003],[-122.335438100000005,37.520522999999997],[-122.335340099999996,37.520426],[-122.335313099999993,37.520398999999998],[-122.335257100000007,37.520364999999998],[-122.335184100000006,37.520341999999999],[-122.335130100000001,37.520336],[-122.334951099999998,37.520330000000001],[-122.334814100000003,37.520325999999997],[-122.334593100000006,37.520926000000003],[-122.334387100000001,37.520798999999997],[-122.332137099999997,37.519416999999997],[-122.331387100000001,37.518957],[-122.331323100000006,37.518867],[-122.331132100000005,37.518597],[-122.331069099999993,37.518507999999997],[-122.330891100000002,37.518253000000001],[-122.330358099999998,37.517491],[-122.330181100000004,37.517237000000002],[-122.330868100000004,37.517014000000003],[-122.3322371,37.516573000000001],[-122.332699099999999,37.516908000000001],[-122.332819099999995,37.516964000000002],[-122.332841099999996,37.516978999999999],[-122.333441100000002,37.517383000000002],[-122.333696099999997,37.517543000000003],[-122.334464100000005,37.518025000000002],[-122.334720099999998,37.518186],[-122.335043099999993,37.518281999999999],[-122.335364100000007,37.518377999999998],[-122.3354851,37.518197000000001],[-122.335662099999993,37.517961],[-122.335778099999999,37.518076000000001],[-122.336017100000007,37.518315000000001],[-122.336057100000005,37.518284000000001],[-122.336081100000001,37.518265999999997],[-122.336192100000005,37.518213000000003],[-122.336238100000003,37.518191999999999],[-122.336095099999994,37.518002000000003],[-122.335667099999995,37.517434999999999],[-122.335525099999998,37.517246],[-122.335582099999996,37.517229999999998],[-122.335689099999996,37.517187999999997],[-122.335778099999999,37.517136999999998],[-122.335854100000006,37.517076000000003],[-122.335911100000004,37.517014000000003],[-122.335962100000003,37.516938000000003],[-122.3359971,37.516857000000002],[-122.336015099999997,37.516781999999999],[-122.336018100000004,37.516677000000001],[-122.336006100000006,37.516615000000002],[-122.336004099999997,37.51661],[-122.335983100000007,37.516523999999997],[-122.335974100000001,37.516447999999997],[-122.335983100000007,37.516362000000001],[-122.336000100000007,37.516295999999997],[-122.336036100000001,37.516215000000003],[-122.336089099999995,37.51614],[-122.336155099999999,37.516072000000001],[-122.336234099999999,37.516013000000001],[-122.336333100000004,37.515960999999997],[-122.336440100000004,37.515906999999999],[-122.336539099999996,37.515842999999997],[-122.336745100000002,37.515669000000003],[-122.336879100000004,37.515574000000001],[-122.337054100000003,37.515470999999998],[-122.3372411,37.515383999999997],[-122.3374381,37.515312999999999],[-122.337609099999995,37.515267000000001],[-122.337784099999993,37.515231999999997],[-122.337993100000006,37.515206999999997],[-122.337999100000005,37.515206999999997],[-122.338178099999993,37.5152],[-122.338363099999995,37.515205999999999],[-122.338499100000007,37.515203],[-122.338619100000003,37.515183999999998],[-122.338724099999993,37.515155],[-122.338864099999995,37.515096999999997],[-122.338586100000001,37.513950999999999],[-122.338580100000001,37.513927000000002],[-122.335345099999998,37.515289000000003],[-122.334260099999995,37.515746999999998],[-122.334240100000002,37.515729],[-122.334181099999995,37.515675000000002],[-122.334082100000003,37.515585999999999],[-122.333786099999998,37.515317000000003],[-122.332901100000001,37.514512000000003],[-122.332606100000007,37.514243999999998],[-122.332257100000007,37.513900999999997],[-122.331170099999994,37.513098999999997],[-122.330781099999996,37.512881999999998],[-122.330719099999996,37.512869000000002],[-122.330637100000004,37.512822999999997],[-122.330521099999999,37.512757999999998],[-122.330421099999995,37.512703999999999],[-122.3303911,37.512687999999997],[-122.330310100000005,37.512642999999997],[-122.330368100000001,37.512566999999997],[-122.330495099999993,37.512405000000001],[-122.330532099999999,37.512332999999998],[-122.330576100000002,37.512248999999997],[-122.330497100000002,37.512312999999999],[-122.330382099999994,37.512408999999998],[-122.330270100000007,37.512515999999998],[-122.330197100000007,37.512587000000003],[-122.330150099999997,37.512632000000004],[-122.330051100000006,37.512729],[-122.330016099999995,37.512771999999998],[-122.329977099999994,37.512824000000002],[-122.329955100000006,37.512852000000002],[-122.329888100000005,37.512936000000003],[-122.329867100000001,37.512965000000001],[-122.329661099999996,37.513060000000003],[-122.329568100000003,37.513103999999998],[-122.329498099999995,37.513136000000003],[-122.329045100000002,37.513345999999999],[-122.32884,37.513441899999997],[-122.328478000000004,37.5137529],[-122.327391000000006,37.514685900000003],[-122.327029999999993,37.514997899999997],[-122.326982999999998,37.515035900000001],[-122.326999000000001,37.515624899999999],[-122.326938999999996,37.515671900000001],[-122.326127999999997,37.516308899999999],[-122.325945000000004,37.516897899999996],[-122.325474999999997,37.517142900000003],[-122.324832999999998,37.517480900000002],[-122.325515999999993,37.518944900000001],[-122.325698000000003,37.519335900000002],[-122.325851999999998,37.519818899999997],[-122.324506,37.5214949],[-122.322788000000003,37.521886899999998],[-122.322288,37.522001899999999],[-122.321568999999997,37.521164900000002],[-122.321088000000003,37.520805899999999],[-122.320588999999998,37.5204339],[-122.320149000000001,37.519796900000003],[-122.319828000000001,37.5195559],[-122.319723999999994,37.519477899999998],[-122.319417999999999,37.519288899999999],[-122.319407999999996,37.519179899999997],[-122.318771999999996,37.519198899999999],[-122.318353000000002,37.519211900000002],[-122.317533999999995,37.519236900000003],[-122.316866000000005,37.519255899999997],[-122.316231000000002,37.519275899999997],[-122.316053999999994,37.519253900000002],[-122.315652,37.5192069],[-122.315522999999999,37.519190899999998],[-122.315347000000003,37.519170899999999],[-122.315335000000005,37.519287900000002],[-122.315320999999997,37.519421899999998],[-122.315291999999999,37.5195559],[-122.315278000000006,37.519622900000002],[-122.315196999999998,37.519729900000002],[-122.315147999999994,37.519824900000003],[-122.315188000000006,37.519903900000003],[-122.315224999999998,37.520085899999998],[-122.315141999999994,37.520371900000001],[-122.314960999999997,37.520595899999996],[-122.314941000000005,37.520621900000002],[-122.314729999999997,37.520691900000003],[-122.314600999999996,37.520652900000002],[-122.314588999999998,37.520738899999998],[-122.314468000000005,37.521025899999998],[-122.314431999999996,37.521112899999999],[-122.314373000000003,37.521161900000003],[-122.314152000000007,37.5213429],[-122.313742000000005,37.521358900000003],[-122.313460000000006,37.5214839],[-122.313439000000002,37.521492899999998],[-122.313284999999993,37.521561900000002],[-122.313153,37.521749900000003],[-122.313187999999997,37.5218469],[-122.313188999999994,37.521864899999997],[-122.313192999999998,37.521975900000001],[-122.313079000000002,37.522069899999998],[-122.313074,37.5220749],[-122.312959000000006,37.522180900000002],[-122.312897000000007,37.522382899999997],[-122.312871000000001,37.522524900000001],[-122.312861999999996,37.522698900000002],[-122.312759,37.522810900000003],[-122.312661000000006,37.522970899999997],[-122.312586999999994,37.5230459],[-122.312516000000002,37.523119899999998],[-122.312363000000005,37.523207900000003],[-122.312263999999999,37.523223899999998],[-122.312199000000007,37.523373900000003],[-122.312004000000002,37.523826900000003],[-122.311940000000007,37.523978900000003],[-122.311953000000003,37.524105900000002],[-122.311961999999994,37.524191899999998],[-122.311977999999996,37.524372900000003],[-122.311864999999997,37.5244049],[-122.311741999999995,37.524440900000002],[-122.311406000000005,37.524326899999998],[-122.310778999999997,37.524115899999998],[-122.310706999999994,37.524074900000002],[-122.310467000000003,37.523863900000002],[-122.310242000000002,37.523666900000002],[-122.310218000000006,37.523617899999998],[-122.309963999999994,37.523407900000002],[-122.309202999999997,37.522777900000001],[-122.308949999999996,37.522568900000003],[-122.308717999999999,37.522342899999998],[-122.308023000000006,37.521665900000002],[-122.307792000000006,37.521440900000002],[-122.307693,37.521367900000001],[-122.307399000000004,37.5211489],[-122.307300999999995,37.521076899999997],[-122.307182999999995,37.521124899999997],[-122.306828999999993,37.521271900000002],[-122.306712000000005,37.521320899999999],[-122.306533000000002,37.521408899999997],[-122.305999,37.521676900000003],[-122.305820999999995,37.521765899999998],[-122.305651999999995,37.521834900000002],[-122.305147000000005,37.522042900000002],[-122.304979000000003,37.522112900000003],[-122.304798700000006,37.522188100000001],[-122.304259700000003,37.522410100000002],[-122.304079000000002,37.522483899999997],[-122.303652,37.522658900000003],[-122.302373000000003,37.523187900000003],[-122.301946999999998,37.523364899999997],[-122.300979999999996,37.523777899999999],[-122.298081999999994,37.525020900000001],[-122.297117,37.5254349],[-122.297004999999999,37.525480899999998],[-122.296671000000003,37.5256179],[-122.296559999999999,37.525664900000002],[-122.296430999999998,37.525712900000002],[-122.296119000000004,37.5258289],[-122.294798999999998,37.526322899999997],[-122.294359999999998,37.526487899999999],[-122.294239000000005,37.526542900000003],[-122.294144000000003,37.526585900000001],[-122.294095999999996,37.526607900000002],[-122.293639999999996,37.526813900000001],[-122.293494999999993,37.5268789],[-122.293279999999996,37.526977899999999],[-122.292882000000006,37.527110899999997],[-122.291687999999994,37.527510900000003],[-122.291291000000001,37.527644899999999],[-122.291060000000002,37.527747900000001],[-122.290734999999998,37.527893900000002],[-122.290366000000006,37.5280469],[-122.290133999999995,37.528143900000003],[-122.289956000000004,37.528216899999997],[-122.289423999999997,37.528436900000003],[-122.289247000000003,37.528510900000001],[-122.288880000000006,37.528660899999998],[-122.287779,37.529114900000003],[-122.287413000000001,37.529266900000003],[-122.287332000000006,37.529212899999997],[-122.286792399999996,37.529554500000003],[-122.285742999999997,37.530451900000003],[-122.285596999999996,37.530551899999999],[-122.285449999999997,37.530650899999998],[-122.285263,37.530603900000003],[-122.284705000000002,37.530462900000003],[-122.284519000000003,37.530415900000001],[-122.283747000000005,37.530214899999997],[-122.281434000000004,37.529613900000001],[-122.280663000000004,37.529413900000002],[-122.280186,37.529297900000003],[-122.278754000000006,37.528949900000001],[-122.278278,37.5288349],[-122.278227999999999,37.528954900000002],[-122.278081,37.5293159],[-122.278031999999996,37.5294369],[-122.277687999999998,37.529325900000003],[-122.277152999999998,37.529153899999997],[-122.276944999999998,37.529628899999999],[-122.276802000000004,37.529959900000001],[-122.276522999999997,37.530283900000001],[-122.276239000000004,37.530615900000001],[-122.275397999999996,37.530518899999997],[-122.274974,37.530470899999997],[-122.275440000000003,37.530930900000001],[-122.275457000000003,37.530948899999999],[-122.276713999999998,37.532283900000003],[-122.276855999999995,37.532435900000003],[-122.277320000000003,37.532934900000001],[-122.277199999999993,37.5331239],[-122.277162000000004,37.533181900000002],[-122.276734000000005,37.533854900000001],[-122.276718000000002,37.533934899999998],[-122.276663999999997,37.534222900000003],[-122.276808000000003,37.534317899999998],[-122.277241000000004,37.534602900000003],[-122.277386000000007,37.534698900000002],[-122.277478000000002,37.534798899999998],[-122.277563999999998,37.534891899999998],[-122.277743000000001,37.535112900000001],[-122.277829999999994,37.535219900000001],[-122.277867999999998,37.535265899999999],[-122.277874999999995,37.535271899999998],[-122.277963999999997,37.535347999999999],[-122.278042999999997,37.535398000000001],[-122.278102099999998,37.535435999999997],[-122.278228999999996,37.535558000000002],[-122.278267999999997,37.535595999999998],[-122.278541099999998,37.535986999999999],[-122.278643099999996,37.536132000000002],[-122.278733099999997,37.536262000000001],[-122.2788331,37.536403999999997],[-122.2788331,37.536518999999998],[-122.278804100000002,37.536704],[-122.278798100000003,37.536749999999998],[-122.278735100000006,37.536844000000002],[-122.278515100000007,37.537173000000003],[-122.278122100000004,37.537557],[-122.277321099999995,37.538288000000001],[-122.277278100000004,37.538367000000001],[-122.276852099999999,37.539166999999999],[-122.276741099999995,37.539425000000001],[-122.276630100000006,37.539661000000002],[-122.276499099999995,37.539968999999999],[-122.276478100000006,37.540402999999998],[-122.276637100000002,37.541007],[-122.276802099999998,37.541375000000002],[-122.276898099999997,37.542304000000001],[-122.276919100000001,37.542881000000001],[-122.276911100000007,37.543506999999998],[-122.277008100000003,37.543869999999998],[-122.277139099999999,37.544156000000001],[-122.277175099999994,37.544196999999997],[-122.277327099999994,37.544370000000001],[-122.277511099999998,37.544578999999999],[-122.277670099999995,37.544671999999998],[-122.278187099999997,37.544913999999999],[-122.278429099999997,37.545074],[-122.278801099999995,37.545431000000001],[-122.278976999999998,37.545650999999999],[-122.279056999999995,37.545749999999998],[-122.279539099999994,37.546503000000001],[-122.279641100000006,37.546785],[-122.279739000000006,37.547052000000001],[-122.279870000000003,37.547459000000003],[-122.279910999999998,37.547936999999997],[-122.280021000000005,37.548265999999998],[-122.280208000000002,37.548470000000002],[-122.280428099999995,37.548558],[-122.280760099999995,37.548596000000003],[-122.281470999999996,37.548546999999999],[-122.281760000000006,37.548530999999997],[-122.282036000000005,37.548586],[-122.282216000000005,37.548630000000003],[-122.282325,37.548636999999999],[-122.282368000000005,37.548641000000003],[-122.282567999999998,37.548623999999997],[-122.282788999999994,37.548558],[-122.282933999999997,37.548459999999999],[-122.283113,37.548316999999997],[-122.283313000000007,37.548278000000003],[-122.283407600000004,37.548270600000002],[-122.283541099999994,37.548267000000003],[-122.283552,37.548270899999999],[-122.283713000000006,37.548321899999998],[-122.283823999999996,37.548437900000003],[-122.283923999999999,37.548583899999997],[-122.284024000000002,37.5487289],[-122.284362000000002,37.5493059],[-122.284443999999993,37.549508899999999],[-122.284495000000007,37.549871899999999],[-122.284508000000002,37.549962899999997],[-122.284520000000001,37.550041899999997],[-122.284526999999997,37.550289900000003],[-122.284486000000001,37.550464900000001],[-122.284340999999998,37.550651899999998],[-122.284132999999997,37.550789899999998],[-122.283945000000003,37.550837899999998],[-122.283925999999994,37.550843899999997],[-122.283615999999995,37.550849900000003],[-122.283416000000003,37.550849900000003],[-122.283112000000003,37.5508989],[-122.282567,37.551118899999999],[-122.282311000000007,37.551206899999997],[-122.282048000000003,37.551424900000001],[-122.282008000000005,37.5514589],[-122.281897000000001,37.551716900000002],[-122.281738000000004,37.551964900000002],[-122.281728999999999,37.552015900000001],[-122.281668999999994,37.5523709],[-122.281700000000001,37.552562899999998],[-122.281730999999994,37.5527449],[-122.281828000000004,37.553007899999997],[-122.281959000000001,37.553337900000002],[-122.282178999999999,37.553640899999998],[-122.282482999999999,37.553859899999999],[-122.282577000000003,37.5538849],[-122.283113999999998,37.554030900000001],[-122.283317999999994,37.554085899999997],[-122.283567000000005,37.554125900000003],[-122.283725000000004,37.554151900000001],[-122.284172999999996,37.554102899999997],[-122.284526,37.554025899999999],[-122.284914000000001,37.5538709],[-122.284981000000002,37.553844900000001],[-122.285306000000006,37.553624900000003],[-122.285157999999996,37.554021900000002],[-122.285060000000001,37.554035900000002],[-122.283511000000004,37.554266900000002],[-122.282995,37.554344899999997],[-122.283028000000002,37.554502900000003],[-122.282360999999995,37.554858899999999],[-122.282158999999993,37.554967900000001],[-122.281869,37.555075899999999],[-122.281632000000002,37.5551599],[-122.281137999999999,37.555333900000001],[-122.280974000000001,37.555392900000001],[-122.280764000000005,37.555449899999999],[-122.280372999999997,37.555497899999999],[-122.279394600000003,37.555556899999999],[-122.279394600000003,37.556978999999998],[-122.279394600000003,37.557319200000002],[-122.279403200000004,37.559441999999997],[-122.279420400000006,37.560326600000003],[-122.279403200000004,37.561939099999996],[-122.2794162,37.562158099999998],[-122.279430500000004,37.5636887],[-122.279437599999994,37.564449600000003],[-122.284558000000004,37.5643916],[-122.284496300000001,37.564526600000001],[-122.284452099999996,37.564691400000001],[-122.284430599999993,37.564798699999997],[-122.284421199999997,37.564893400000003],[-122.284459999999996,37.565422900000002],[-122.284460999999993,37.5656599],[-122.284460999999993,37.565764899999998],[-122.284462000000005,37.5660819],[-122.284463000000002,37.566187900000003],[-122.284463000000002,37.566341899999998],[-122.284465999999995,37.566803899999996],[-122.284467000000006,37.566958900000003],[-122.284468000000004,37.567210899999999],[-122.284470999999996,37.567966900000002],[-122.284473000000006,37.568219900000003],[-122.284475,37.568699899999999],[-122.284481,37.570139900000001],[-122.284482999999994,37.570454900000001],[-122.284475,37.570619899999997],[-122.284537,37.570621899999999],[-122.285117999999997,37.570457900000001],[-122.285235,37.570457900000001],[-122.287582999999998,37.570468900000002],[-122.288365999999996,37.570472899999999],[-122.288379000000006,37.570516900000001],[-122.288390000000007,37.571151899999997],[-122.288427999999996,37.573197899999997],[-122.288441000000006,37.573879900000001],[-122.288445999999993,37.574110900000001],[-122.288449999999997,37.5743419],[-122.288452000000007,37.574447900000003],[-122.288453000000004,37.5744939],[-122.288441000000006,37.575984900000002],[-122.288392000000002,37.582299900000002],[-122.288376,37.5844059],[-122.288334000000006,37.587950900000003],[-122.288279000000003,37.592633900000003],[-122.288274999999999,37.598588900000003],[-122.288273000000004,37.602134900000003]]]]}]}



var polygonPoints = [
  [37.786617, -122.404654],
  [37.797843, -122.407057],
  [37.798962, -122.398260],
  [37.794299, -122.395234]];
// var poly = L.polygon(polygonPoints).addTo(map);

L.geoJSON(sanFrancisco).addTo(map);
L.geoJSON(berkeley).addTo(map);
L.geoJSON(oakland).addTo(map);
L.geoJSON(sanMateo).addTo(map);



placesAutocomplete.on('suggestions', handleOnSuggestions);
placesAutocomplete.on('cursorchanged', handleOnCursorchanged);
placesAutocomplete.on('change', handleOnChange);
placesAutocomplete.on('clear', handleOnClear);

function handleOnSuggestions(e) {
  markers.forEach(removeMarker);
  markers = [];

  if (e.suggestions.length === 0) {
    map.setView(new L.LatLng(0, 0), 1);
    return;
  }

  e.suggestions.forEach(addMarker);
  findBestZoom();
}

function handleOnChange(e) {
  console.log('sup')
  markers
    .forEach(function(marker, markerIndex) {
      if (markerIndex === e.suggestionIndex) {
        markers = [marker];
        marker.setOpacity(1);
        findBestZoom();
      } else {
        removeMarker(marker);
      }
    });
}

function handleOnClear() {
  map.setView(new L.LatLng(0, 0), 1);
  markers.forEach(removeMarker);
}

function handleOnCursorchanged(e) {
  markers
    .forEach(function(marker, markerIndex) {
      if (markerIndex === e.suggestionIndex) {
        marker.setOpacity(1);
        marker.setZIndexOffset(1000);
      } else {
        marker.setZIndexOffset(0);
        marker.setOpacity(0.5);
      }
    });
}

function addMarker(suggestion) {
  var marker = L.marker(suggestion.latlng, {opacity: .4});
  marker.addTo(map);
  markers.push(marker);
}

function removeMarker(marker) {
  map.removeLayer(marker);
}

function findBestZoom() {
  var featureGroup = L.featureGroup(markers);
  map.fitBounds(featureGroup.getBounds().pad(0.5), {animate: false});
}